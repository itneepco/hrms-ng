<div class="main-container">
  <mat-card *ngIf="dataSource && !isLoading" class="table">
    <mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="position">
        <mat-header-cell *matHeaderCellDef fxFlex="9"> Sl. </mat-header-cell>
        <mat-cell *matCellDef="let training; let i = index;" fxFlex="10"> 
          {{ i + 1 + pageIndex*pageSize }} 
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef fxFlex="40"> Name </mat-header-cell>
        <mat-cell *matCellDef="let training" fxFlex="40"> {{training.course_title}} </mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="venue">
        <mat-header-cell *matHeaderCellDef fxFlex="13"> Venue </mat-header-cell>
        <mat-cell *matCellDef="let training" fxFlex="13"> {{training.venue}} </mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="from_date">
        <mat-header-cell *matHeaderCellDef fxFlex="13"> From Date </mat-header-cell>
        <mat-cell *matCellDef="let training" fxFlex="13"> {{training.from_date | date:'mediumDate'}} </mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="type">
        <mat-header-cell *matHeaderCellDef fxFlex="10"> Type </mat-header-cell>
        <mat-cell *matCellDef="let training" fxFlex="10"> {{ trainingService.getTrainingType(training.training_type) }} </mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef fxFlex="15"> Actions </mat-header-cell>
        <mat-cell *matCellDef="let training" fxFlex="15">
          <button mat-icon-button (click)="onShow(training)" color="accent">
            <mat-icon>search</mat-icon>
          </button>
          <ng-container *ngIf="auth.isTrainingAdmin()">
            <button mat-icon-button (click)="onEdit(training)" color="primary">
              <mat-icon>edit</mat-icon>
            </button>
          </ng-container>
        </mat-cell>
      </ng-container>
  
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  
    <mat-paginator [pageSizeOptions]="[10, 15, 30, 50]"
      [length]="dataLength"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      showFirstLastButtons
      (page)="changePage($event)">
    </mat-paginator>
  </mat-card>
  
  <mat-card *ngIf="errMsg">
    <p class="errMsg">{{errMsg}}</p>
  </mat-card>
  
  <mat-spinner diameter="60" *ngIf="isLoading"></mat-spinner>
</div>